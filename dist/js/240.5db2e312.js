"use strict";(self["webpackChunkhotel_bytrip"]=self["webpackChunkhotel_bytrip"]||[]).push([[240],{6240:function(e,s,t){t.r(s),t.d(s,{default:function(){return le}});var o=t(3396);const n={id:"personal-view",class:"router-view"};function i(e,s,t,i,l,a){const d=(0,o.up)("PersonalityForm"),r=(0,o.up)("SecurityForm");return(0,o.wg)(),(0,o.iD)("main",n,[(0,o.Wm)(d),(0,o.Wm)(r)])}var l=t(7139),a=t(9242);const d={id:"personality-form"},r=(0,o._)("h2",null,"Личные данные",-1);function u(e,s,t,n,i,u){const p=(0,o.up)("InputField"),c=(0,o.up)("AppModalVue");return(0,o.wg)(),(0,o.iD)("form",d,[r,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.FIELDS,(s=>((0,o.wg)(),(0,o.j4)(p,{key:s.fieldId,fieldId:s.fieldId,user:e.user,onChange:u.onChange,title:s.label,placeholder:s.label,type:"name"},null,8,["fieldId","user","onChange","title","placeholder"])))),128)),(0,o._)("button",{class:(0,l.C_)(["save",{disabled:!e.hasChanges}]),onClick:s[0]||(s[0]=(0,a.iM)((e=>u.submit()),["prevent"]))}," Сохранить личные данные ",2),(0,o.Wm)(c,{showed:e.successModalIsShowed,title:"Данные сохранены",onClose:s[1]||(s[1]=e=>u.hideModal())},null,8,["showed"])])}var p=t(4870),c=t(6669);const h={class:"container"},w={class:"input-interactive"},m=["type","name","placeholder","value","disabled"],g=["src"];function v(e,s,t,n,i,d){return(0,o.wg)(),(0,o.iD)("div",{class:(0,l.C_)(`field ${e.$props.fieldId}-field`)},[(0,o._)("label",null,(0,l.zw)(e.$props.title),1),(0,o._)("div",h,[(0,o._)("div",w,[(0,o._)("input",{type:i.inputType,name:e.$props.fieldId,placeholder:e.$props.placeholder,value:e.$props.user[e.$props.fieldId],onInput:s[0]||(s[0]=s=>e.$props.onChange(s)),disabled:e.$props.disabled},null,40,m),"password"==e.$props.type&&0==e.$props.disabled?((0,o.wg)(),(0,o.iD)("button",{key:0,class:"switch-watching",onClick:s[1]||(s[1]=(0,a.iM)((e=>d.switchPasswordInputType()),["prevent"]))},[(0,o._)("img",{src:`/img/icon_${i.passwordIsShowed?"hide_password":"show_password"}.svg`},null,8,g)])):(0,o.kq)("",!0)]),(0,o.WI)(e.$slots,"button")])],2)}var f={props:["user","onChange","title","placeholder","fieldId","type","disabled"],data(){return console.log(this.$props),{inputType:this.$props.type,passwordIsShowed:!1}},methods:{switchPasswordInputType(){this.passwordIsShowed=!this.passwordIsShowed,this.passwordIsShowed?this.inputType="text":this.inputType="password"}}},b=t(89);const I=(0,b.Z)(f,[["render",v]]);var _=I;const C=[{fieldId:"last_name",label:"Фамилия"},{fieldId:"first_name",label:"Имя"},{fieldId:"middle_name",label:"Отчество"}],S={FIELDS:C,successModalIsShowed:(0,p.iH)(!1),hasChanges:(0,p.iH)(!1),user:{last_name:"Гетьман",first_name:"Михаил",middle_name:"Евгеньевич"},unchangedUser:{last_name:"Гетьман",first_name:"Михаил",middle_name:"Евгеньевич"}};var y={data(){return S},methods:{submit:k,hideModal(){this.successModalIsShowed=!1},onChange:function(e){let{value:s,name:t}=e.target;this.user[t]=s,this.$forceUpdate()}},updated(){S.hasChanges.value=$()},components:{AppModalVue:c.Z,InputField:_}};function $(){let e=0;return Object.keys(S.unchangedUser).map((s=>{e+=Number(S.user[s]!=S.unchangedUser[s])})),!!e}function k(){S.hasChanges.value&&(S.successModalIsShowed.value=!0)}const F=(0,b.Z)(y,[["render",u]]);var M=F;const A={id:"security-form"},D=(0,o._)("h2",null,"Безопасность",-1);function P(e,s,t,n,i,d){const r=(0,o.up)("EmailField"),u=(0,o.up)("InputField"),p=(0,o.up)("PasswordsFields"),c=(0,o.up)("DoubleAuthField"),h=(0,o.up)("AppModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("form",A,[D,(0,o.Wm)(r,{user:e.user,onChange:d.onChange},null,8,["user","onChange"]),(0,o.Wm)(u,{fieldId:"phone",type:"text",placeholder:"Номер телефона",title:"Телефон",user:e.user,onChange:d.onChange},null,8,["user","onChange"]),(0,o.Wm)(p,{user:e.user,onChange:d.onChange},null,8,["user","onChange"]),(0,o.Wm)(c,{user:e.user,onChange:d.onChange},null,8,["user","onChange"]),(0,o._)("button",{class:(0,l.C_)(["save",{disabled:!e.hasChanges}]),onClick:s[0]||(s[0]=(0,a.iM)((e=>d.submit()),["prevent"]))}," Сохранить настройки безопасности ",2)]),(0,o.Wm)(h,{showed:e.successModalIsShowed,title:"Данные сохранены",onClose:s[1]||(s[1]=e=>d.hideModal())},null,8,["showed"])],64)}const W=(0,o._)("button",{class:"action-button"},"Подтвердить",-1);var O={__name:"EmailField",setup(e){return(e,s)=>((0,o.wg)(),(0,o.j4)(_,(0,o.dG)({fieldId:"email",type:"email",placeholder:"Почта",title:"Почта"},e.$props),{button:(0,o.w5)((()=>[W])),_:1},16))}};const E=O;var L=E;function T(e,s,t,n,i,d){const r=(0,o.up)("InputField");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(r,(0,o.dG)(e.$props,{fieldId:"password",type:"password",placeholder:e.inputsAreShowed?"Новый пароль":"Пароль был изменен 14.10.2023 в 19:24",title:"Пароль",disabled:!e.inputsAreShowed}),{button:(0,o.w5)((()=>[(0,o._)("button",{class:"action-button",onClick:s[0]||(s[0]=(0,a.iM)((e=>d.switchInputsShow()),["prevent"]))},(0,l.zw)(e.inputsAreShowed?"Отмена":"Изменить пароль"),1)])),_:1},16,["placeholder","disabled"]),(0,o.Wm)(a.uT,{name:"passwords-fade"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(r,(0,o.dG)(e.$props,{fieldId:"repeatedPassword",type:"password",placeholder:"Повторите Новый пароль",title:"Повтор пароля",disabled:!e.inputsAreShowed}),null,16,["disabled"]),[[a.F8,e.inputsAreShowed]])])),_:1})],64)}var U={data:()=>({inputsAreShowed:!1}),props:["user","onChange"],methods:{switchInputsShow(){let e=this.inputsAreShowed;this.inputsAreShowed=!e,0==this.inputsAreShowed&&(this.$props.user.password="",this.$props.user.repeatedPassword="")}},components:{InputField:_}};const H=(0,b.Z)(U,[["render",T],["__scopeId","data-v-e014b728"]]);var Z=H;const x=["src"],z={key:0,class:"options-list"},j=["onClick"];function q(e,s,t,n,i,d){return(0,o.wg)(),(0,o.iD)("div",{class:(0,l.C_)(["custom-select",e.$props.class])},[(0,o._)("div",{class:"selected-field",onClick:s[0]||(s[0]=e=>d.switchOptionsList())},[(0,o.Uk)((0,l.zw)(i.label)+" ",1),(0,o._)("img",{class:"svg-icon",src:`/img/${i.optionsIsShowed?"icon_close.svg":"icon_arrow_down.svg"} `},null,8,x)]),(0,o.Wm)(a.uT,{name:"options-list-fade"},{default:(0,o.w5)((()=>[i.optionsIsShowed?((0,o.wg)(),(0,o.iD)("div",z,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$props.options,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e[0],class:(0,l.C_)(["option",{selected:i.value==e[0]}]),onClick:s=>d.changeSelectedOption(e)},(0,l.zw)(e[1]),11,j)))),128))])):(0,o.kq)("",!0)])),_:1})],2)}var Y={data(){return{value:null,label:null,optionsIsShowed:!1}},mounted(){let e=this.$props.options[0];this.value=e[0],this.label=e[1]},updated(){0!=this.optionsIsShowed&&(this.fitPositions(),window.addEventListener("resize",this.fitPositions))},unmounted(){window.removeEventListener("resize",this.fitPositions)},methods:{changeSelectedOption:function(e){let[s,t]=e;this.value=s,this.label=t,this.$emit("change",{target:this}),this.switchOptionsList()},switchOptionsList(){let e=!this.optionsIsShowed;this.optionsIsShowed=e,this.optionsIsShowed?document.addEventListener("click",this.clickOutSelect):document.removeEventListener("click",this.clickOutSelect)},clickOutSelect(e){e.target.closest(".custom-select")||(this.optionsIsShowed=!1,document.removeEventListener("click",this.clickOutSelect))},fitPositions(){let e=this.$el.querySelector(".options-list"),s=this.$el.querySelector(".selected-field"),t=s.getBoundingClientRect(),o=t.bottom+document.documentElement.scrollTop;e.style.top=o+"px",e.style.width=t.width+"px"}},props:["class","options","name"]};const G=(0,b.Z)(Y,[["render",q],["__scopeId","data-v-dd32215a"]]);var K=G;const N={class:"field"},V=(0,o._)("label",null,"Двойная аутентификация",-1),B={data(){return{options:[["none","Не выбрано"],["phone","Номер телефона"],["email","Адрес электронной почты"]]}},props:["onChange"]};var R=Object.assign(B,{__name:"DoubleAuthField",setup(e){return(e,s)=>((0,o.wg)(),(0,o.iD)("div",N,[V,(0,o.Wm)(K,{options:e.$data.options,class:"field",name:"doubleAuth",onChange:s[0]||(s[0]=s=>e.$props.onChange(s))},null,8,["options"])]))}});const J=R;var Q=J;const X={hasChanges:(0,p.iH)(!1),successModalIsShowed:(0,p.iH)(!1),user:{email:"domain@example.com",phone:"+7928491237",password:"",repeatedPassword:"",doubleAuth:"none"},unchangedUser:{email:"domain@example.com",phone:"+7928491237",password:"",repeatedPassword:"",doubleAuth:"none"}};var ee={data(){return X},components:{EmailField:L,PasswordsFields:Z,DoubleAuthField:Q,InputField:_,AppModal:c.Z},methods:{submit(){X.hasChanges.value&&(this.successModalIsShowed=!0)},onChange:function(e){let{value:s,name:t}=e.target;this.user[t]=s,this.$forceUpdate()},hideModal(){this.successModalIsShowed=!1}},updated(){X.hasChanges.value=se()}};function se(){let e=0;return Object.keys(X.unchangedUser).map((s=>{e+=Number(X.user[s]!=X.unchangedUser[s])})),!!e}const te=(0,b.Z)(ee,[["render",P]]);var oe=te,ne={components:{PersonalityForm:M,SecurityForm:oe},data(){return{exitModalIsShowed:!1}}};const ie=(0,b.Z)(ne,[["render",i]]);var le=ie}}]);
//# sourceMappingURL=240.5db2e312.js.map